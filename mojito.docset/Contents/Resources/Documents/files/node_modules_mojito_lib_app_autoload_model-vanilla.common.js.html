<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>node_modules&#x2F;mojito&#x2F;lib&#x2F;app&#x2F;autoload&#x2F;model-vanilla.common.js - Mojito API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;developer.yahoo.com&#x2F;cocktails&#x2F;mojito&#x2F;api&#x2F;assets&#x2F;img&#x2F;mojito-logo-white-bkg.png" title="Mojito API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.7.5</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/ActionContext.html">ActionContext</a></li>
            
                <li><a href="..&#x2F;classes/Analytics.common.html">Analytics.common</a></li>
            
                <li><a href="..&#x2F;classes/Assets.common.html">Assets.common</a></li>
            
                <li><a href="..&#x2F;classes/Composite.common.html">Composite.common</a></li>
            
                <li><a href="..&#x2F;classes/Config.common.html">Config.common</a></li>
            
                <li><a href="..&#x2F;classes/Cookie.client.html">Cookie.client</a></li>
            
                <li><a href="..&#x2F;classes/Cookie.server.html">Cookie.server</a></li>
            
                <li><a href="..&#x2F;classes/Data.common.data.html">Data.common.data</a></li>
            
                <li><a href="..&#x2F;classes/Data.common.pageData.html">Data.common.pageData</a></li>
            
                <li><a href="..&#x2F;classes/Deploy.server.html">Deploy.server</a></li>
            
                <li><a href="..&#x2F;classes/Helpers.common.html">Helpers.common</a></li>
            
                <li><a href="..&#x2F;classes/Http.server.html">Http.server</a></li>
            
                <li><a href="..&#x2F;classes/Intl.common.html">Intl.common</a></li>
            
                <li><a href="..&#x2F;classes/Meta.common.html">Meta.common</a></li>
            
                <li><a href="..&#x2F;classes/Model.Vanilla.html">Model.Vanilla</a></li>
            
                <li><a href="..&#x2F;classes/Models.common.html">Models.common</a></li>
            
                <li><a href="..&#x2F;classes/MojitoDispatcher.html">MojitoDispatcher</a></li>
            
                <li><a href="..&#x2F;classes/MojitoPerf.html">MojitoPerf</a></li>
            
                <li><a href="..&#x2F;classes/MojitoRouter.html">MojitoRouter</a></li>
            
                <li><a href="..&#x2F;classes/MojitProxy.html">MojitProxy</a></li>
            
                <li><a href="..&#x2F;classes/OutputBuffer.html">OutputBuffer</a></li>
            
                <li><a href="..&#x2F;classes/OutputHandler.html">OutputHandler</a></li>
            
                <li><a href="..&#x2F;classes/Params.common.html">Params.common</a></li>
            
                <li><a href="..&#x2F;classes/Partial.common.html">Partial.common</a></li>
            
                <li><a href="..&#x2F;classes/ResourceStore.server.html">ResourceStore.server</a></li>
            
                <li><a href="..&#x2F;classes/RSAddonConfig.html">RSAddonConfig</a></li>
            
                <li><a href="..&#x2F;classes/RSAddonDispatchHelper.html">RSAddonDispatchHelper</a></li>
            
                <li><a href="..&#x2F;classes/RSAddonMime.html">RSAddonMime</a></li>
            
                <li><a href="..&#x2F;classes/RSAddonSelector.html">RSAddonSelector</a></li>
            
                <li><a href="..&#x2F;classes/RSAddonUrl.html">RSAddonUrl</a></li>
            
                <li><a href="..&#x2F;classes/RSAddonYUI.html">RSAddonYUI</a></li>
            
                <li><a href="..&#x2F;classes/Url.common.html">Url.common</a></li>
            
                <li><a href="..&#x2F;classes/Y.mojito.Client.html">Y.mojito.Client</a></li>
            
                <li><a href="..&#x2F;classes/Y.mojito.lib.REST.html">Y.mojito.lib.REST</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/ActionContext.html">ActionContext</a></li>
            
                <li><a href="..&#x2F;modules/ActionContextAddon.html">ActionContextAddon</a></li>
            
                <li><a href="..&#x2F;modules/app.html">app</a></li>
            
                <li><a href="..&#x2F;modules/CommonLibs.html">CommonLibs</a></li>
            
                <li><a href="..&#x2F;modules/Data.common.html">Data.common</a></li>
            
                <li><a href="..&#x2F;modules/model-vanilla.html">model-vanilla</a></li>
            
                <li><a href="..&#x2F;modules/mojito-perf.html">mojito-perf</a></li>
            
                <li><a href="..&#x2F;modules/MojitoClient.html">MojitoClient</a></li>
            
                <li><a href="..&#x2F;modules/MojitoHooks.html">MojitoHooks</a></li>
            
                <li><a href="..&#x2F;modules/OutputBuffer.html">OutputBuffer</a></li>
            
                <li><a href="..&#x2F;modules/ResourceStore.html">ResourceStore</a></li>
            
                <li><a href="..&#x2F;modules/ResourceStoreAddon.html">ResourceStoreAddon</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: node_modules&#x2F;mojito&#x2F;lib&#x2F;app&#x2F;autoload&#x2F;model-vanilla.common.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;*
 * Copyright (c) 2011-2013, Yahoo! Inc.  All rights reserved.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 *&#x2F;

&#x2F;*jslint anon:true, sloppy:true, nomen:true *&#x2F;
&#x2F;*global YUI*&#x2F;

YUI.add(&#x27;model-vanilla&#x27;, function (Y, NAME) {

    &#x27;use strict&#x27;;

    &#x2F;**
    TODO: This will eventually become part of the YUI Core, (work in progress here
    https:&#x2F;&#x2F;github.com&#x2F;yui&#x2F;yui3&#x2F;pull&#x2F;323), and the only pending work in mojito will
    be to remove this file, and replace apidoc references to Model.Vanilla with
    Y.Model.

    @module app
    @submodule model-vanilla
    @since 3.11.0
    **&#x2F;

    var GlobalEnv = YUI.namespace(&#x27;Env.Model&#x27;),

        AttributeCore   = Y.AttributeCore,
        AttributeExtras = Y.AttributeExtras,
        Lang            = Y.Lang,
        YArray          = Y.Array,
        YObject         = Y.Object;

    &#x2F;**
    Attribute-based data model with APIs for getting, setting, validating, and
    syncing attribute values.

    This Vanilla model does NOT use &#x60;Y.BaseCore&#x60;, instead it uses &#x60;Y.mix()&#x60; and
    a regular prototype definition to mix in the model api with the AttributeCore
    and AttributeExtras to provide the exact same API that &#x60;Y.Model&#x60; exposes but
    with better performance when it comes to the server runtime.

    See also http:&#x2F;&#x2F;yuilibrary.com&#x2F;yui&#x2F;docs&#x2F;api&#x2F;classes&#x2F;Model.html

    @class Model.Vanilla
    @constructor
    **&#x2F;
    function ModelVanilla(config) {
        this.changed    = {};
        this.lastChange = {};
        this.lists      = [];
        this.idAttribute = &#x27;id&#x27;;
        this._allowAdHocAttrs = true;
        this._isYUIModel = true;
        AttributeCore.apply(this, arguments);
        AttributeExtras.apply(this, arguments);
        if (config) {
            this.setAttrs(config);
        }
    }
    ModelVanilla.prototype = {
        &#x2F;&#x2F; -- Public Properties ----------------------------------------------------

        &#x2F;**
        Hash of attributes that have changed since the last time this model was
        saved.

        @property changed
        @type Object
        @default {}
        **&#x2F;

        &#x2F;**
        Name of the attribute to use as the unique id (or primary key) for this
        model.

        The default is &#x60;id&#x60;, but if your persistence layer uses a different name for
        the primary key (such as &#x60;_id&#x60; or &#x60;uid&#x60;), you can specify that here.

        The built-in &#x60;id&#x60; attribute will always be an alias for whatever attribute
        name you specify here, so getting and setting &#x60;id&#x60; will always behave the
        same as getting and setting your custom id attribute.

        @property idAttribute
        @type String
        @default &#x60;&#x27;id&#x27;&#x60;
        **&#x2F;
        &#x2F;&#x2F; idAttribute: &#x27;id&#x27;,

        &#x2F;**
        Hash of attributes that were changed in the last &#x60;change&#x60; event. Each item
        in this hash is an object with the following properties:

          * &#x60;newVal&#x60;: The new value of the attribute after it changed.
          * &#x60;prevVal&#x60;: The old value of the attribute before it changed.
          * &#x60;src&#x60;: The source of the change, or &#x60;null&#x60; if no source was specified.

        @property lastChange
        @type Object
        @default {}
        **&#x2F;

        &#x2F;**
        Array of &#x60;ModelList&#x60; instances that contain this model.

        When a model is in one or more lists, the model&#x27;s events will bubble up to
        those lists. You can subscribe to a model event on a list to be notified
        when any model in the list fires that event.

        This property is updated automatically when this model is added to or
        removed from a &#x60;ModelList&#x60; instance. You shouldn&#x27;t alter it manually. When
        working with models in a list, you should always add and remove models using
        the list&#x27;s &#x60;add()&#x60; and &#x60;remove()&#x60; methods.

        @example Subscribing to model events on a list:

            &#x2F;&#x2F; Assuming &#x60;list&#x60; is an existing Y.ModelList instance.
            list.on(&#x27;*:change&#x27;, function (e) {
                &#x2F;&#x2F; This function will be called whenever any model in the list
                &#x2F;&#x2F; fires a &#x60;change&#x60; event.
                &#x2F;&#x2F;
                &#x2F;&#x2F; &#x60;e.target&#x60; will refer to the model instance that fired the
                &#x2F;&#x2F; event.
            });

        @property lists
        @type ModelList[]
        @default &#x60;[]&#x60;
        **&#x2F;

        &#x2F;&#x2F; -- Protected Properties -------------------------------------------------

        &#x2F;**
        This tells &#x60;Y.Base&#x60; that it should create ad-hoc attributes for config
        properties passed to Model&#x27;s constructor. This makes it possible to
        instantiate a model and set a bunch of attributes without having to subclass
        &#x60;Y.Model&#x60; and declare all those attributes first.

        @property _allowAdHocAttrs
        @type Boolean
        @default true
        @protected
        @since 3.5.0
        **&#x2F;
        &#x2F;&#x2F; _allowAdHocAttrs: true,

        &#x2F;**
        Total hack to allow us to identify Model instances without using
        &#x60;instanceof&#x60;, which won&#x27;t work when the instance was created in another
        window or YUI sandbox.

        @property _isYUIModel
        @type Boolean
        @default true
        @protected
        @since 3.5.0
        **&#x2F;
        &#x2F;&#x2F; _isYUIModel: true,

        &#x2F;&#x2F; -- Public Methods -------------------------------------------------------

        &#x2F;**
        Returns a clientId string that&#x27;s unique among all models on the current page
        (even models in other YUI instances). Uniqueness across pageviews is
        unlikely.

        @method generateClientId
        @return {String} Unique clientId.
        **&#x2F;
        generateClientId: function () {
            GlobalEnv.lastId = GlobalEnv.lastId || 0;
            return this.constructor.NAME + &#x27;_&#x27; + (GlobalEnv.lastId += 1);
        },

        &#x2F;**
        Returns the value of the specified attribute.

        If the attribute&#x27;s value is an object, _name_ may use dot notation to
        specify the path to a specific property within the object, and the value of
        that property will be returned.

        @example
            &#x2F;&#x2F; Set the &#x27;foo&#x27; attribute to an object.
            myModel.set(&#x27;foo&#x27;, {
                bar: {
                    baz: &#x27;quux&#x27;
                }
            });

            &#x2F;&#x2F; Get the value of &#x27;foo&#x27;.
            myModel.get(&#x27;foo&#x27;);
            &#x2F;&#x2F; =&gt; {bar: {baz: &#x27;quux&#x27;}}

            &#x2F;&#x2F; Get the value of &#x27;foo.bar.baz&#x27;.
            myModel.get(&#x27;foo.bar.baz&#x27;);
            &#x2F;&#x2F; =&gt; &#x27;quux&#x27;

        @method get
        @param {String} name Attribute name or object property path.
        @return {Any} Attribute value, or &#x60;undefined&#x60; if the attribute doesn&#x27;t
          exist.
        **&#x2F;

        &#x2F;&#x2F; get() is defined by Y.Attribute.

        &#x2F;**
        Returns an HTML-escaped version of the value of the specified string
        attribute. The value is escaped using &#x60;Y.Escape.html()&#x60;.

        @method getAsHTML
        @param {String} name Attribute name or object property path.
        @return {String} HTML-escaped attribute value.
        **&#x2F;
        getAsHTML: function (name) {
            var value = this.get(name);
            return Y.Escape.html(Lang.isValue(value) ? String(value) : &#x27;&#x27;);
        },

        &#x2F;**
        Returns a URL-encoded version of the value of the specified string
        attribute. The value is encoded using the native &#x60;encodeURIComponent()&#x60;
        function.

        @method getAsURL
        @param {String} name Attribute name or object property path.
        @return {String} URL-encoded attribute value.
        **&#x2F;
        getAsURL: function (name) {
            var value = this.get(name);
            return encodeURIComponent(Lang.isValue(value) ? String(value) : &#x27;&#x27;);
        },

        &#x2F;**
        Returns &#x60;true&#x60; if any attribute of this model has been changed since the
        model was last saved.

        New models (models for which &#x60;isNew()&#x60; returns &#x60;true&#x60;) are implicitly
        considered to be &quot;modified&quot; until the first time they&#x27;re saved.

        @method isModified
        @return {Boolean} &#x60;true&#x60; if this model has changed since it was last saved,
          &#x60;false&#x60; otherwise.
        **&#x2F;
        isModified: function () {
            return this.isNew() || !YObject.isEmpty(this.changed);
        },

        &#x2F;**
        Returns &#x60;true&#x60; if this model is &quot;new&quot;, meaning it hasn&#x27;t been saved since it
        was created.

        Newness is determined by checking whether the model&#x27;s &#x60;id&#x60; attribute has
        been set. An empty id is assumed to indicate a new model, whereas a
        non-empty id indicates a model that was either loaded or has been saved
        since it was created.

        @method isNew
        @return {Boolean} &#x60;true&#x60; if this model is new, &#x60;false&#x60; otherwise.
        **&#x2F;
        isNew: function () {
            return !Lang.isValue(this.get(&#x27;id&#x27;));
        },

        &#x2F;**
        Loads this model from the server.

        This method delegates to the &#x60;sync()&#x60; method to perform the actual load
        operation, which is an asynchronous action. Specify a _callback_ function to
        be notified of success or failure.

        A successful load operation will fire a &#x60;load&#x60; event, while an unsuccessful
        load operation will fire an &#x60;error&#x60; event with the &#x60;src&#x60; value &quot;load&quot;.

        If the load operation succeeds and one or more of the loaded attributes
        differ from this model&#x27;s current attributes, a &#x60;change&#x60; event will be fired.

        @method load
        @param {Object} [options] Options to be passed to &#x60;sync()&#x60; and to &#x60;set()&#x60;
          when setting the loaded attributes. It&#x27;s up to the custom sync
          implementation to determine what options it supports or requires, if any.
        @param {callback} [callback] Called when the sync operation finishes.
          @param {Error|null} callback.err If an error occurred, this parameter will
            contain the error. If the sync operation succeeded, _err_ will be
            &#x60;null&#x60;.
          @param {Any} callback.response The server&#x27;s response. This value will
            be passed to the &#x60;parse()&#x60; method, which is expected to parse it and
            return an attribute hash.
        @chainable
        **&#x2F;
        load: function (options, callback) {
            var self = this;

            &#x2F;&#x2F; Allow callback as only arg.
            if (typeof options === &#x27;function&#x27;) {
                callback = options;
                options  = {};
            }

            options = options || {};

            self.sync(&#x27;read&#x27;, options, function (err, response) {
                self._handleRead(err, response, options, callback);
            });

            return self;
        },

        &#x2F;**
        Called to parse the _response_ when the model is loaded from the server.
        This method receives a server _response_ and is expected to return an
        attribute hash.

        The default implementation assumes that _response_ is either an attribute
        hash or a JSON string that can be parsed into an attribute hash. If
        _response_ is a JSON string and either &#x60;Y.JSON&#x60; or the native &#x60;JSON&#x60; object
        are available, it will be parsed automatically. If a parse error occurs, an
        &#x60;error&#x60; event will be fired and the model will not be updated.

        You may override this method to implement custom parsing logic if necessary.

        @method parse
        @param {Any} response Server response.
        @return {Object} Attribute hash.
        **&#x2F;
        parse: function (response) {
            if (typeof response === &#x27;string&#x27;) {
                try {
                    return Y.JSON.parse(response);
                } catch (ex) {
                    return null;
                }
            }

            return response;
        },

        &#x2F;**
        Saves this model to the server.

        This method delegates to the &#x60;sync()&#x60; method to perform the actual save
        operation, which is an asynchronous action. Specify a _callback_ function to
        be notified of success or failure.

        A successful save operation will fire a &#x60;save&#x60; event, while an unsuccessful
        save operation will fire an &#x60;error&#x60; event with the &#x60;src&#x60; value &quot;save&quot;.

        If the save operation succeeds and one or more of the attributes returned in
        the server&#x27;s response differ from this model&#x27;s current attributes, a
        &#x60;change&#x60; event will be fired.

        @method save
        @param {Object} [options] Options to be passed to &#x60;sync()&#x60; and to &#x60;set()&#x60;
          when setting synced attributes. It&#x27;s up to the custom sync implementation
          to determine what options it supports or requires, if any.
        @param {Function} [callback] Called when the sync operation finishes.
          @param {Error|null} callback.err If an error occurred or validation
            failed, this parameter will contain the error. If the sync operation
            succeeded, _err_ will be &#x60;null&#x60;.
          @param {Any} callback.response The server&#x27;s response. This value will
            be passed to the &#x60;parse()&#x60; method, which is expected to parse it and
            return an attribute hash.
        @chainable
        **&#x2F;
        save: function (options, callback) {
            var self = this;

            &#x2F;&#x2F; Allow callback as only arg.
            if (typeof options === &#x27;function&#x27;) {
                callback = options;
                options  = {};
            }

            options = options || {};

            self._validate(self.toJSON(), function (err) {
                var action;

                if (err) {
                    if (callback) {
                        callback.call(null, err);
                    }

                    return;
                }

                action = self.isNew() ? &#x27;create&#x27; : &#x27;update&#x27;;

                self.sync(action, options, function (err, response) {
                    self._handleSave(err, response, options, callback);
                });
            });

            return self;
        },

        &#x2F;**
        Sets the value of a single attribute. If model validation fails, the
        attribute will not be set and an &#x60;error&#x60; event will be fired.

        Use &#x60;setAttrs()&#x60; to set multiple attributes at once.

        @example
            model.set(&#x27;foo&#x27;, &#x27;bar&#x27;);

        @method set
        @param {String} name Attribute name or object property path.
        @param {any} value Value to set.
        @param {Object} [options] Data to be mixed into the event facade of the
            &#x60;change&#x60; event(s) for these attributes.
          @param {Boolean} [options.silent=false] If &#x60;true&#x60;, no &#x60;change&#x60; event will
              be fired.
        @chainable
        **&#x2F;
        set: function (name, value, options) {
            var attributes = {};

            attributes[name] = value;

            return this.setAttrs(attributes, options);
        },

        &#x2F;**
        TODO: Update description.

        Sets the values of multiple attributes at once. If model validation fails,
        the attributes will not be set and an &#x60;error&#x60; event will be fired.

        @example
            model.setAttrs({
                foo: &#x27;bar&#x27;,
                baz: &#x27;quux&#x27;
            });

        @method setAttrs
        @param {Object} attributes Hash of attribute names and values to set.
        @param {Object} [options] Data to be mixed into the event facade of the
            &#x60;change&#x60; event(s) for these attributes.
          @param {Boolean} [options.silent=false] If &#x60;true&#x60;, no &#x60;change&#x60; event will
              be fired.
        @chainable
        **&#x2F;
        setAttrs: function (attributes, options) {
            var idAttribute = this.idAttribute,
                changed,
                e,
                key,
                lastChange,
                transaction;

            options = options || {};
            transaction = options._transaction = {};

            &#x2F;&#x2F; When a custom id attribute is in use, always keep the default &#x60;id&#x60;
            &#x2F;&#x2F; attribute in sync.
            if (idAttribute !== &#x27;id&#x27;) {
                &#x2F;&#x2F; So we don&#x27;t modify someone else&#x27;s object.
                attributes = Y.merge(attributes);

                if (YObject.owns(attributes, idAttribute)) {
                    attributes.id = attributes[idAttribute];
                } else if (YObject.owns(attributes, &#x27;id&#x27;)) {
                    attributes[idAttribute] = attributes.id;
                }
            }

            for (key in attributes) {
                if (attributes.hasOwnProperty(key) &amp;&amp; YObject.owns(attributes, key)) {
                    this._setAttr(key, attributes[key], options);
                }
            }

            this._processAttrsTransaction(transaction, options);

            return this;
        },

        &#x2F;**
        Override this method to provide a custom persistence implementation for this
        model. The default just calls the callback without actually doing anything.

        This method is called internally by &#x60;load()&#x60;, &#x60;save()&#x60;, and &#x60;destroy()&#x60;.

        @method sync
        @param {String} action Sync action to perform. May be one of the following:

          * &#x60;create&#x60;: Store a newly-created model for the first time.
          * &#x60;delete&#x60;: Delete an existing model.
          * &#x60;read&#x60;  : Load an existing model.
          * &#x60;update&#x60;: Update an existing model.

        @param {Object} [options] Sync options. It&#x27;s up to the custom sync
          implementation to determine what options it supports or requires, if any.
        @param {Function} [callback] Called when the sync operation finishes.
          @param {Error|null} callback.err If an error occurred, this parameter will
            contain the error. If the sync operation succeeded, _err_ will be
            falsy.
          @param {Any} [callback.response] The server&#x27;s response.
        **&#x2F;
        sync: function () {
            var yarray = YArray, &#x2F;&#x2F; jslint :(
                callback = yarray(arguments, 0, true).pop();

            if (typeof callback === &#x27;function&#x27;) {
                callback();
            }
        },

        &#x2F;**
        Returns a copy of this model&#x27;s attributes that can be passed to
        &#x60;Y.JSON.stringify()&#x60; or used for other nefarious purposes.

        The &#x60;clientId&#x60; attribute is not included in the returned object.

        If you&#x27;ve specified a custom attribute name in the &#x60;idAttribute&#x60; property,
        the default &#x60;id&#x60; attribute will not be included in the returned object.

        Note: The ECMAScript 5 specification states that objects may implement a
        &#x60;toJSON&#x60; method to provide an alternate object representation to serialize
        when passed to &#x60;JSON.stringify(obj)&#x60;.  This allows class instances to be
        serialized as if they were plain objects.  This is why Model&#x27;s &#x60;toJSON&#x60;
        returns an object, not a JSON string.

        See &lt;http:&#x2F;&#x2F;es5.github.com&#x2F;#x15.12.3&gt; for details.

        @method toJSON
        @return {Object} Copy of this model&#x27;s attributes.
        **&#x2F;
        toJSON: function () {
            var attrs = this.getAttrs();

            delete attrs.clientId;
            delete attrs.destroyed;
            delete attrs.initialized;

            if (this.idAttribute !== &#x27;id&#x27;) {
                delete attrs.id;
            }

            return attrs;
        },

        &#x2F;**
        Reverts the last change to the model.

        If an _attrNames_ array is provided, then only the named attributes will be
        reverted (and only if they were modified in the previous change). If no
        _attrNames_ array is provided, then all changed attributes will be reverted
        to their previous values.

        Note that only one level of undo is available: from the current state to the
        previous state. If &#x60;undo()&#x60; is called when no previous state is available,
        it will simply do nothing.

        @method undo
        @param {Array} [attrNames] Array of specific attribute names to revert. If
          not specified, all attributes modified in the last change will be
          reverted.
        @param {Object} [options] Data to be mixed into the event facade of the
            change event(s) for these attributes.
          @param {Boolean} [options.silent=false] If &#x60;true&#x60;, no &#x60;change&#x60; event will
              be fired.
        @chainable
        **&#x2F;
        undo: function (attrNames, options) {
            var lastChange  = this.lastChange,
                idAttribute = this.idAttribute,
                toUndo      = {},
                needUndo;

            attrNames = attrNames || YObject.keys(lastChange);

            YArray.each(attrNames, function (name) {
                if (YObject.owns(lastChange, name)) {
                    &#x2F;&#x2F; Don&#x27;t generate a double change for custom id attributes.
                    name = name === idAttribute ? &#x27;id&#x27; : name;

                    needUndo     = true;
                    toUndo[name] = lastChange[name].prevVal;
                }
            });

            return needUndo ? this.setAttrs(toUndo, options) : this;
        },

        &#x2F;**
        Override this method to provide custom validation logic for this model.

        While attribute-specific validators can be used to validate individual
        attributes, this method gives you a hook to validate a hash of all
        attributes before the model is saved. This method is called automatically
        before &#x60;save()&#x60; takes any action. If validation fails, the &#x60;save()&#x60; call
        will be aborted.

        In your validation method, call the provided &#x60;callback&#x60; function with no
        arguments to indicate success. To indicate failure, pass a single argument,
        which may contain an error message, an array of error messages, or any other
        value. This value will be passed along to the &#x60;error&#x60; event.

        @example

            model.validate = function (attrs, callback) {
                if (attrs.pie !== true) {
                    &#x2F;&#x2F; No pie?! Invalid!
                    callback(&#x27;Must provide pie.&#x27;);
                    return;
                }

                &#x2F;&#x2F; Success!
                callback();
            };

        @method validate
        @param {Object} attrs Attribute hash containing all model attributes to
            be validated.
        @param {Function} callback Validation callback. Call this function when your
            validation logic finishes. To trigger a validation failure, pass any
            value as the first argument to the callback (ideally a meaningful
            validation error of some kind).

            @param {Any} [callback.err] Validation error. Don&#x27;t provide this
                argument if validation succeeds. If validation fails, set this to an
                error message or some other meaningful value. It will be passed
                along to the resulting &#x60;error&#x60; event.
        **&#x2F;
        validate: function (attrs, callback) {
            if (callback) {
                callback();
            }
        },

        &#x2F;&#x2F; -- Protected Methods ----------------------------------------------------

        &#x2F;**
        Duckpunches the &#x60;addAttr&#x60; method provided by &#x60;Y.Attribute&#x60; to keep the
        &#x60;id&#x60; attribute’s value and a custom id attribute’s (if provided) value
        in sync when adding the attributes to the model instance object.

        Marked as protected to hide it from Model&#x27;s public API docs, even though
        this is a public method in Attribute.

        @method addAttr
        @param {String} name The name of the attribute.
        @param {Object} config An object with attribute configuration property&#x2F;value
          pairs, specifying the configuration for the attribute.
        @param {Boolean} lazy (optional) Whether or not to add this attribute lazily
          (on the first call to get&#x2F;set).
        @return {Object} A reference to the host object.
        @chainable
        @protected
        **&#x2F;
        addAttr: function (name, config, lazy) {
            var idAttribute = this.idAttribute,
                idAttrCfg,
                id;

            if (idAttribute &amp;&amp; name === idAttribute) {
                idAttrCfg = this._isLazyAttr(&#x27;id&#x27;) || this._getAttrCfg(&#x27;id&#x27;);
                id        = config.value === config.defaultValue ? null : config.value;

                if (!Lang.isValue(id)) {
                    &#x2F;&#x2F; Hunt for the id value.
                    id = idAttrCfg.value === idAttrCfg.defaultValue ? null : idAttrCfg.value;

                    if (!Lang.isValue(id)) {
                        &#x2F;&#x2F; No id value provided on construction, check defaults.
                        id = Lang.isValue(config.defaultValue) ?
                                config.defaultValue :
                                idAttrCfg.defaultValue;
                    }
                }

                config.value = id;

                &#x2F;&#x2F; Make sure &#x60;id&#x60; is in sync.
                if (idAttrCfg.value !== id) {
                    idAttrCfg.value = id;

                    if (this._isLazyAttr(&#x27;id&#x27;)) {
                        this._state.add(&#x27;id&#x27;, &#x27;lazy&#x27;, idAttrCfg);
                    } else {
                        this._state.add(&#x27;id&#x27;, &#x27;value&#x27;, id);
                    }
                }
            }

            return AttributeCore.prototype.addAttr.apply(this, arguments);
        },

        &#x2F;**
        Calls the public, overrideable &#x60;parse()&#x60; method and returns the result.

        Override this method to provide a custom pre-parsing implementation. This
        provides a hook for custom persistence implementations to &quot;prep&quot; a response
        before calling the &#x60;parse()&#x60; method.

        @method _parse
        @param {Any} response Server response.
        @return {Object} Attribute hash.
        @protected
        @see Model.parse()
        @since 3.7.0
        **&#x2F;
        _parse: function (response) {
            return this.parse(response);
        },

        &#x2F;&#x2F; TODO: Document method.
        &#x2F;&#x2F; TODO: Think if this is a good name.
        _processAttrsTransaction: function (transaction, options) {
            var changed, e, key, lastChange;

            if (!YObject.isEmpty(transaction)) {
                changed    = this.changed;
                lastChange = this.lastChange = {};

                for (key in transaction) {
                    if (transaction.hasOwnProperty(key) &amp;&amp; YObject.owns(transaction, key)) {
                        e = transaction[key];

                        changed[key] = e.newVal;

                        lastChange[key] = {
                            newVal : e.newVal,
                            prevVal: e.prevVal,
                            src    : e.src || null
                        };
                    }
                }
            }
        },

        &#x2F;&#x2F; TODO: Document method.
        &#x2F;&#x2F; TODO: Think if this is a good name.
        _handleRead: function (err, response, options, callback) {
            var parsed;

            if (!err) {
                parsed = this._parse(response);
                this.setAttrs(parsed, options);
                this.changed = {};
            }

            if (callback) {
                callback(err, response);
            }
        },

        &#x2F;&#x2F; TODO: Document method.
        &#x2F;&#x2F; TODO: Think if this is a good name.
        _handleSave: function (err, response, options, callback) {
            var parsed;

            if (!err) {
                if (response) {
                    parsed = this._parse(response);
                    this.setAttrs(parsed, options);
                }

                this.changed = {};
            }

            if (callback) {
                callback(err, response);
            }
        },

        &#x2F;**
        TODO: Update method description.

        Calls the public, overridable &#x60;validate()&#x60; method and fires an &#x60;error&#x60; event
        if validation fails.

        @method _validate
        @param {Object} attributes Attribute hash.
        @param {Function} callback Validation callback.
            @param {Any} [callback.err] Value on failure, non-value on success.
        @protected
        **&#x2F;
        _validate: function (attributes, callback) {
            this.validate(attributes, function (err) {
                if (Lang.isValue(err)) {
                    callback(err);
                } else {
                    callback();
                }
            });
        }
    };

    Y.Model.Vanilla = ModelVanilla;
    Y.mix(Y.Model.Vanilla, AttributeCore, false, null, 1);
    Y.mix(Y.Model.Vanilla, AttributeExtras, false, null, 1);

}, &quot;&quot;, { requires: [&quot;attribute-core&quot;, &quot;attribute-extras&quot;, &quot;escape&quot;, &quot;json-parse&quot;, &quot;model&quot;]});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>

<!-- SpaceID=0 robot -->

<!-- VER-3.0.246810 -->
<!-- p2.ydn.bf1.yahoo.com uncompressed/chunked Fri Oct  4 11:13:16 PDT 2013 -->
